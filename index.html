<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<style>
			body {
				margin: 0;
				padding: 0;
			}

			#content {
				width: 100%;
				border-top: 1px solid black;
				border-bottom: 1px solid black;
			}

			.editor_holder {
				margin: 5px;
				padding: 5px;
			}

			.editor {
				padding: 5px;
			}

			textarea {
				display: block;
				padding: 3px;
				margin: 3px;
				border: 1px solid black;
				font-family: "Helvetica Neue", sans-serif;
			}

			button {
				border: 1px solid black;
				border-radius: 0;
				padding: 3px;
				margin: 3px;
				background-color: LightGray;
				font-family: "Helvetica Neue", sans-serif;
			}

			input {
				margin: 3px;
				padding: 3px;
				border: 1px solid black;
				font-family: "Helvetica Neue", sans-serif;
				width: 250px;
			}

			#tutorial {
				font-family: "Helvetica Neue", sans-serif;
				font-weight: 300;
				margin: 10px;
			}

			#tutorial h1, h2, h3, h4, h5, h6 {
				font-weight: 400;
				margin-top: 16px;
				margin-bottom: 8px;
			}

			#tutorial p {
				margin: 0;
			}

			#tutorial img {
				width: 60%;
				margin: 10px 0;
			}
		</style>
	</head>
	<body>
		<div id="edit">
			<div id="header_editor" data-partner-id="header" class="editor_holder">
				<input data-selector="#left" type="text" value="Southwestern Veterans' Center" oninput="updateText(this)"></input>
				<input data-selector="#right" type="text" value="Quarterly Newsletter" oninput="updateText(this)"></input>
			</div>
			<div id="spotlight_editors" class="editor_holder">
				<button data-section="spotlight" data-editor="spotlight_editor" onclick="add(this)">Add Spotlight</button>
			</div>
			<div id="opportunity_editors" class="editor_holder">
				<button data-section="opportunity" data-editor="opportunity_editor" onclick="add(this)">Add Opportunity</button>
			</div>
			<div id="project_editors" class="editor_holder">
				<button data-section="project" data-editor="project_editor" onclick="add(this)">Add Project Recap</button>
			</div>
			<div id="footer_editor" data-partner-id="footer" class="editor_holder">
				Name: <input data-selector="#name" type="text" value="Brian Beach" oninput="updateText(this)"></input><br />
				Title: <input data-selector="#title" type="text" value="Volunteer Resource Coodinator" oninput="updateText(this)"></input><br />
				Center: <input data-selector="#center" type="text" value="Southwestern Veterans' Center" oninput="updateText(this)"></input><br />
				Organization: <input data-selector="#organization" type="text" value="Department of Military and Veterans Affairs" oninput="updateText(this)"></input><br />
				Address: <input data-selector="#address1" type="text" value="7060 Highland Drive" oninput="updateText(this)"></input>
				<input data-selector="#address2" type="text" value="Pittsburgh PA, 15206" oninput="updateText(this)"></input><br />
				Phone: <input data-selector="#phone" type="text" value="Phone: 412.665.6790" oninput="updateText(this)"></input>
				<input data-selector="#phone" type="text" value="tel:4126656790" oninput="updateLink(this)"></input><br />
				Email: <input data-selector="#email" type="text" value="Email: bribeach@pa.gov" oninput="updateText(this)"></input>
				<input data-selector="#email" type="text" value="mailto: bribeach@pa.gov" oninput="updateLink(this)"></input><br />
				Fax: <input data-selector="#fax" type="text" value="Fax: 412.665.6799" oninput="updateText(this)"></input><br />
				Website: <input data-selector="#url" type="text" value="www.dmva.state.pa.us" oninput="updateText(this)"></input>
				<input data-selector="#url" type="text" value="http://www.dmva.state.pa.us/" oninput="updateLink(this)"></input><br />
			</div>
		</div>
		<div id="content">
			<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,900" rel="stylesheet">
			<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
			<div id="header" style="overflow: auto; line-height: 40px; font-size: 1rem; font-family: &quot;Montserrat&quot;, &quot;Gotham&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">
				<img style="float: left; height: 40px; width: 40px;" src="https://www.dmva.pa.gov/PublishingImages/DMVA_Keystone-01.svg" alt="Department of Military and Veterans Affairs Logo">
				<span id="left" style="float: left; padding: 0 4px 0 8px; color: #003146; vertical-align: middle;">Southwestern Veterans' Center</span>
				<span id="right" style="display: block; text-align: right; padding: 0 8px; color: #003146; vertical-align: middle;">Quarterly Newsletter</span>
			</div>
			<div style="background-image: url(&quot;https://www.dmva.pa.gov/banners/flag_banner.jpg&quot;); background-size: cover; height: 200px;"></div>
			<div id="spotlights" style="padding: 8px 16px; background-color: #ffffff; font-family: &quot;Montserrat&quot;, &quot;Gotham&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">
			</div>
			<div id="opportunities" style="padding: 8px 16px; background-color: #224671; font-family: &quot;Montserrat&quot;, &quot;Gotham&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">
			</div>
			<div id="projects" style="padding: 8px 16px; background-color: #ebebeb; font-family: &quot;Montserrat&quot;, &quot;Gotham&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">
			</div>
			<footer id="footer" style="padding: 8px 16px; text-align:center; font-size: 1rem; font-family: &quot;Montserrat&quot;, &quot;Gotham&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">
				<span id="name" style="padding: 3px; display: block; color: #003146;">Brian Beach</span>
				<span id="title" style="padding: 3px; display: block; color: #003146;">Volunteer Resource Coordinator</span>
				<span id="center" style="padding: 3px; display: block;  color: #003146;">Southwestern Veterans' Center</span>
				<span id="organization" style="padding: 3px; display: block; color: #003146;">Department of Military and Veterans Affairs</span>
				<span id="address1" style="padding: 3px; display: block; color: #003146;">7060 Highland Drive</span>
				<span id="address2" style="padding: 3px; display: block; color: #003146;">Pittsburgh PA, 15206</span>
				<a id="phone" href="tel:4126656790" style="padding: 3px; text-decoration-line: underline; display: block; color: #003146;">Phone: 412.665.6790</a>
				<a id="email" href="mailto:bribeach@pa.gov" style="padding: 3px; text-decoration-line: underline; display: block; color: #003146;">Email: bribeach@pa.gov</a>
				<span id="fax" style="padding: 3px; display: block; color: #003146;">Fax: 412.665.6799</span>
				<a id="url" href="http://www.dmva.state.pa.us/" style="padding: 3px; text-decoration-line: underline; display: block; color: #003146;">www.dmva.state.pa.us</a>
			</footer>
		</div>
		<button onclick="copyOutput()">Copy to Clipboard</button>
		<div id="tutorial">
			<h1>How to Use this Template</h1>
			<h2>Dealing with Sections</h2>
			<p>Use the buttons at the top of this page to add Spotlight, Opportunity, or Project Recap sections. To edit a section, change the text boxes at the top of the page that correspond to the section you want to edit. Any changes made to the text boxes will also be made to the display sample. If you ever want to remove a section, click the corresponding remove button.</p>
			<h3>Editing Paragraphs</h3>
			<p>To edit text, write or paste text into the text boxes. If you don't want one of the text elements such as a date, remove all text from the corresponding text box. The element you don't want will no longer be displayed, although it can be brought back by adding new text to the text box. Also note that you will not be able to use line breaks in the small text boxes.</p>
			<h3>Adding Images</h3>
			<p> To change an image, paste the URL of the image you want to use into the text input. Note that images sent as attachments will not show up in an email. Images must be hosted somewhere online for them to show up in an email. If you're not sure where to host an image, consider using an image hosting website like <a href="https://imgur.com">Imgur</a>.</p>
			<h4>Hosting Images On Imgur</h4>
			<ol>
				<li>To host images on Imgur, you'll first have to create an account with the website.</li>
				<li>Once you've signed up and logged in, click the &quot;New post&quot; button at the top left of the page. This should take you to an upload page.</li>
				<li>Drag an image from your file system into the area that says &quot;Drop images here&quot;. Your post will be uploaded to Imgur and you should see a page like the one below.</li>
				<li>Then, right click on the image and click "Copy Image Link" or a similar option depending on your browser.</li>
				<li>Paste the link you've just copied into the appropriate &quot;Image URL&quot; box on this page. If the image shows up in the display area above, you've done everything correctly.</li>
				<li>To upload more images, go back to the Imgur home pack by clicking the logo in the top left.</li>
				<li>Then, click &quot;New post&quot; again and repeat the process from step 3.</li>
			</ol>
			<img src="https://i.imgur.com/hazrAoz.png" alt="Screenshot of Imgur upload page"/>
			<h4>Removing Images</h4>
			<p>If you don't want to have an image in a section, clear the text in the &quot;Image URL&quot; box. The image and the associated alt text should completely disappear.</p>
		</div>
		<template id="spotlight">
			<div data-parent="spotlights" style="padding: 8px 0; overflow: auto;">
				<img src="https://www.dmva.pa.gov/paveteranshomes/Volunteer/PublishingImages/VolunteerCandyShop.jpg" alt="Volunteer spotlight image" style="max-width: 75%; max-height: 450px; display: block; margin: 0 auto 8px auto;"/>
				<h1 style="font-size: 20px; margin: 3px 0; text-align: center; color: #2a578d;">Volunteer Spotlight</h1>
				<p style="font-size: 16px; margin: 3px 0; text-align: center; color: #464646;">Laborum aperiam porro nulla molestias aut quia. Adipisci optio assumenda ex molestiae exercitationem blanditiis. Impedit soluta qui nesciunt quam et perspiciatis animi similique. Ea quia aut omnis sapiente. Aut praesentium hic harum est et sunt eveniet quasi. Delectus omnis qui repudiandae ipsum dicta facere voluptatum est. Aut dolore iure aut facilis ut voluptatem sit illo. Ducimus quisquam magni ipsa quia modi ullam nesciunt. Quibusdam aut voluptatum sequi facilis. Velit facilis aliquid id doloremque at sed nulla. Omnis doloremque corporis recusandae. Excepturi illum quis dolorem at omnis ut ipsam veritatis. Omnis earum earum iure. Cum sed et animi placeat aut et voluptatibus sit. Id quia quas voluptas adipisci rerum rerum dolore. Rem voluptates aspernatur dicta sunt placeat quis ipsa et. Quia eum aliquid dolore. Tenetur cupiditate perspiciatis labore laboriosam. Est cum suscipit enim illo aut delectus. Nostrum ducimus consectetur ex animi ipsa sunt aliquid. Assumenda ut sit vel voluptas expedita sit. Aut enim rem porro illo eum mollitia. Magni repellat iure consequatur et. Repudiandae sed voluptate quo. Commodi modi deserunt sint recusandae.</p>
			</div>
		</template>
		<template id="opportunity">
			<div data-parent="opportunities" style="padding: 4px 0; overflow: auto;">
				<img src="https://www.dmva.pa.gov/paveteranshomes/PublishingImages/BVH%20Accordion%20Items/Dietary%20Staff.jpg" alt="Opportunity image" style="max-width:300px; float: left; margin: 4px 12px 4px 0;"/>
				<table style="width: 300px;"></table> <!-- A bit of a hack that allows the paragraph to move below the image when there's not enough space -->
				<h1 style="font-size: 20px; margin: 3px 0; color: #b8b7b4;">Opportunity</h1>
				<h6 style="font-size: 12px; margin: 3px 0; color: #fafafa;">January 1, 1970</h6>
				<p style="font-size: 16px; margin: 3px 0; color: #fafafa;">A ut omnis facere ad aut debitis. Deleniti quia aperiam dolores aut. Eum et et est. Aut sapiente tempore blanditiis. Delectus est ut distinctio enim. Aliquid consequuntur illum eum exercitationem. Amet esse consequuntur ut sed autem occaecati. Quidem voluptas tempore voluptatem necessitatibus quam et qui. Repellat eius consequuntur dicta. In consequuntur sint et molestiae ut totam. Deleniti praesentium et blanditiis. Laborum a exercitationem necessitatibus. Voluptas est magnam a debitis qui nihil. Officiis velit alias temporibus labore illo dolore. Vero nisi laboriosam laudantium cumque. Qui enim consequatur quia et quis. Accusantium harum asperiores voluptatem. Omnis nihil accusamus et. A repellat voluptatibus dolor voluptate sit necessitatibus quod quidem. Aperiam inventore ut vel praesentium. Vero soluta quis quo corporis et delectus porro officiis.</p>
			</div>
		</template>
		<template id="project">
			<div data-parent="projects" style="padding: 4px 0; overflow: auto;">
				<img src="https://www.dmva.pa.gov/paveteranshomes/PublishingImages/BVH%20Accordion%20Items/Volunteers.jpg" alt="Project recap image" style="max-width:300px; float: left; margin: 4px 12px 4px 0;"/>
				<table style="width: 300px;"></table> <!-- A bit of a hack that allows the paragraph to move below the image when there's not enough  space -->
				<h1 style="font-size: 20px; margin: 3px 0; color: #2a578d;">Project Recap</h1>
				<h6 style="font-size: 12px; margin: 3px 0; color: #000000;">January 1, 1970</h6>
				<p style="font-size: 16px; margin: 3px 0; color: #000000;">Magnam dolor laborum fugit maxime. Veritatis alias voluptate rerum voluptas quibusdam animi rerum recusandae. Ea omnis unde incidunt culpa aut repellat. Sint ut nihil et quis nihil consequuntur. Aut sed qui magni quidem iure. Debitis et sed et sint. Et est quo at odio excepturi quia illo. Expedita autem vero quis ea consequatur quam. Et voluptas deleniti ut totam. Quod rerum voluptatum dolor. Magni magnam alias ullam modi facilis corrupti. Quas nulla temporibus doloremque molestiae rem quis. Ex molestias velit quia a aut. Veniam voluptas ut possimus quaerat excepturi delectus architecto. Voluptate ullam nemo velit dolor ut enim similique. Sint asperiores dicta eaque eaque ipsum. Repudiandae sit non non officia in natus. Est doloremque neque dolore. Non pariatur id aut voluptates assumenda labore. Accusantium id ipsam est dolorem sapiente reiciendis corrupti. Assumenda optio aliquid maiores consequatur aut quia culpa. Asperiores provident tempore et perferendis voluptas sunt.</p>
			</div>
		</template>
		<template id="spotlight_editor">
			<div data-parent="spotlight_editors" class="editor">
				<input data-selector="h1" type="text" oninput="updateText(this)" value="Volunteer Spotlight"></input>
				<input data-selector="img" type="url" oninput="updateImage(this)" value="Image URL"></input>
				<button onclick="remove(this)">Remove Spotlight</button>
				<textarea data-selector="p" cols="150" rows="4" oninput="updateText(this)">Description</textarea>
			</div>
		</template>
		<template id="opportunity_editor">
			<div data-parent="opportunity_editors" class="editor">
				<input data-selector="h1" type="text" oninput="updateText(this)" value="Opportunity"></input>
				<input data-selector="img" type="url" oninput="updateImage(this)" value="Image URL"></input>
				<input data-selector="h6" type="text" oninput="updateText(this)" value="Date"></input>
				<button onclick="remove(this)">Remove Opportunity</button>
				<textarea data-selector="p" cols="150" rows="4" oninput="updateText(this)">Description</textarea>
			</div>
		</template>
		<template id="project_editor">
			<div data-parent="project_editors" class="editor">
				<input data-selector="h1" type="text" oninput="updateText(this)" value="Project Recap"></input>
				<input data-selector="img" type="url" oninput="updateImage(this)" value="Image URL"></input>
				<input data-selector="h6" type="text" oninput="updateText(this)" value="Date"></input>
				<button onclick="remove(this)">Remove Project Recap</button>
				<textarea data-selector="p" cols="150" rows="4" oninput="updateText(this)">Description</textarea>
			</div>
		</template>
		<script>
			var items = 0; // Used to assign IDs

			function add(input) {
				const editor = document.getElementById(input.getAttribute("data-editor")).content.cloneNode(true);
				editor.firstElementChild.setAttribute("data-partner-id", items);
				document.getElementById(editor.firstElementChild.getAttribute("data-parent")).appendChild(editor);
				const section = document.getElementById(input.getAttribute("data-section")).content.cloneNode(true);
				section.firstElementChild.id = items
				document.getElementById(section.firstElementChild.getAttribute("data-parent")).appendChild(section);
				items++;
			}

			function updateText(input) {
				const partner = document.getElementById(input.parentElement.getAttribute("data-partner-id")).querySelector(input.getAttribute("data-selector"));
				checkDisplay(partner, input.value);				
				// Translate line breaks into break elements
				const split = input.value.split("\n");
				var nodes = [];
				for (let i = 0; i < split.length; i++) {
					nodes.push(document.createTextNode(split[i]));
					nodes.push(document.createElement("br"));
				}
				partner.replaceChildren(...nodes);
			}

			function updateImage(input) {
				const partner = document.getElementById(input.parentElement.getAttribute("data-partner-id")).querySelector(input.getAttribute("data-selector"));
				checkDisplay(partner, input.value);				
				partner.src = input.value;
			}

			function updateLink(input) {
				const partner = document.getElementById(input.parentElement.getAttribute("data-partner-id")).querySelector(input.getAttribute("data-selector"));
				if (input.value.length === 0) {
					partner.style["text-decoration-line"] = "none";
				} else {
					partner.style["text-decoration-line"] = "underline";
				}
				partner.href = input.value;
			}

			// Displays element if and only if value is non-empty
			function checkDisplay(elem, value) {
				if (value.length === 0) {
					if (elem.getAttribute("data-display") === null) {
						elem.setAttribute("data-display", elem.style.display);
					}
					elem.style.display = "none";
				} else {
					const disp = elem.getAttribute("data-display");
					if (disp !== null) {
						elem.style.display = disp;
					}
					elem.removeAttribute("data-display")
				}
			}

			function remove(input) {
				const edit = input.parentElement;
				const elem = document.getElementById(edit.getAttribute("data-partner-id"));
				elem.remove();
				edit.remove();
			}

			function copyOutput() {
				const content = document.getElementById("content");
				const out = document.getElementById("output");
				navigator.clipboard.writeText(content.innerHTML);
			}
		</script>
	</body>
</html>
